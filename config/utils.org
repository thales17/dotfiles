#+html_link_up: ../
#+html_link_home: ../
#+title: config/utils
<2022-04-02 Sat>
* sus - Suspend
sus is a small script that locks the screen and puts the computer into suspend mode
#+name: sus
#+begin_src sh  :tangle ~/.local/bin/sus :tangle-mode (identity #o755) :mkdirp yes
#!/bin/bash

xlock &

sleep 1 && systemctl suspend
#+end_src

* backup
- Backup script that rsyncs home dir to a remote server. Ideally a cron job is setup to run this automatically.
- (Note: _cronie only_) For example you could add this to your crontab =30 19 * * *	source $HOME/.bash_env && $HOME/.local/bin/backup >> $HOME/.local/log/backup.log 2>&1= to run the backup daily at 7:30pm
- When using =vixie-cron= you will not be able to use environment variables in the =crontab=, instead you might need to make a runner script that does the above.
#+name: backup
#+begin_src sh  :tangle ~/.local/bin/backup :tangle-mode (identity #o755) :mkdirp yes
#!/bin/bash

TIME=$(date); echo "backup starting at $TIME"

echo "Pushing password store"
cd $HOME/.password-store/ && git pull && git push

echo "rsyncing home folder"
rsync --recursive --exclude-from $HOME/.backup_exclude $HOME $BACKUP_SERVER:$BACKUP_SERVER_PATH/$HOSTNAME/

TIME=$(date); echo "backup done at $TIME"

#+end_src

#+name: backup_exclude
#+begin_src sh  :tangle ~/.backup_exclude :tangle-mode (identity #o755) :mkdirp yes
.cache
.mozilla
.local/share/Steam
Music/
music/
games/
code/mame_getter/
.st/
#+end_src

* volume
#+name: voldown
#+begin_src sh  :tangle ~/.local/bin/voldown :tangle-mode (identity #o755) :mkdirp yes
#!/bin/bash

pamixer -d 5

VOL=`pamixer --get-volume`
BAR=$(seq --separator="─" 0 "$((VOL / 5))" | sed 's/[0-9]//g')

dunstify -i "audio-volume-high" -r 2593 -u normal "$BAR"" $VOL%"
#+end_src
#+name: volup

#+begin_src sh  :tangle ~/.local/bin/volup :tangle-mode (identity #o755) :mkdirp yes
#!/bin/bash

pamixer -i 5

VOL=`pamixer --get-volume`
BAR=$(seq --separator="─" 0 "$((VOL / 5))" | sed 's/[0-9]//g')

dunstify -i "audio-volume-high" -r 2593 -u normal "$BAR"" $VOL%"
#+end_src

#+name: volmute
#+begin_src sh  :tangle ~/.local/bin/volmute :tangle-mode (identity #o755) :mkdirp yes
#!/bin/bash

pamixer -t

if [ `pamixer --get-mute` == "true" ];
then
    dunstify -i "audio-volume-muted" -r 2593 -u normal " Mute"
else
    VOL=`pamixer --get-volume`
    BAR=$(seq --separator="─" 0 "$((VOL / 5))" | sed 's/[0-9]//g')

    dunstify -i "audio-volume-high" -r 2593 -u normal "$BAR"" $VOL%"
fi
#+end_src

* brightness
#+name: lightdown
#+begin_src sh :tangle ~/.local/bin/lightdown :tangle-mode (identity #o755) :mkdirp yes
#!/bin/bash

xbacklight -dec 5

LIGHT=`xbacklight`
LIGHT=`printf "%.0f" $LIGHT`

BAR=$(seq --separator="─" 0 "$((LIGHT / 5))" | sed 's/[0-9]//g')

dunstify -i "system" -r 2593 -u normal "$BAR"" $LIGHT%"
#+end_src

#+name: lightup
#+begin_src sh :tangle ~/.local/bin/lightup :tangle-mode (identity #o755) :mkdirp yes
#!/bin/bash

xbacklight -inc 5

LIGHT=`xbacklight`
LIGHT=`printf "%.0f" $LIGHT`

BAR=$(seq --separator="─" 0 "$((LIGHT / 5))" | sed 's/[0-9]//g')

dunstify -i "system" -r 2593 -u normal "$BAR"" $LIGHT%"
#+end_src
* mail
- It is probably good to sync mail down every few hours
#+name: syncmail
#+begin_src sh :tangle ~/.local/bin/syncmail :tangle-mode (identity #o755) :mkdirp yes
#!/bin/sh
TIME=$(date); echo "syncmail starting at $TIME"

# Sync all mailboxes
mbsync -a -q

# Reindex mail with notmuch
notmuch new

TIME=$(date); echo "syncmail ending at $TIME"
#+end_src
* ec =emacsclient -c=
#+name: ec
#+begin_src sh :tangle ~/.local/bin/ec :tangle-mode (identity #o755) :mkdirp yes
#!/bin/sh

emacsclient -c
#+end_src
